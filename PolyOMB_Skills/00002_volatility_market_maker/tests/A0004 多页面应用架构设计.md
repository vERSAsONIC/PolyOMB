# A0004 å¤šé¡µé¢åº”ç”¨æ¶æ„è®¾è®¡

## ç›®æ ‡
å°†4ä¸ªç‹¬ç«‹çš„ Streamlit ç•Œé¢æ•´åˆä¸ºä¸€ä¸ªç»Ÿä¸€çš„å¤šé¡µé¢åº”ç”¨

## Streamlit å¤šé¡µé¢åº”ç”¨ç»“æ„

```
00002_volatility_market_maker/
â”œâ”€â”€ app.py                      # ä¸»å…¥å£ï¼ˆå¯¼èˆªé¡µé¢ï¼‰
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ 01_Skill_Manager.py     # Skill ç®¡ç†é¡µé¢
â”‚   â”œâ”€â”€ 02_Param_Config.py      # å‚æ•°é…ç½®é¡µé¢
â”‚   â”œâ”€â”€ 03_Backtest_Runner.py   # å›è¯•è¿è¡Œé¡µé¢
â”‚   â””â”€â”€ 04_Result_Charts.py     # ç»“æœå›¾è¡¨é¡µé¢
â”œâ”€â”€ components/                 # å…±äº«ç»„ä»¶
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ common.py              # å…¬å…±UIç»„ä»¶ï¼ˆheader, footerç­‰ï¼‰
â”‚   â”œâ”€â”€ state_manager.py       # Session State ç®¡ç†
â”‚   â””â”€â”€ charts.py              # å›¾è¡¨ç»„ä»¶å°è£…
â”œâ”€â”€ services/                   # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ data_service.py        # æ•°æ®æœåŠ¡
â”‚   â””â”€â”€ config_service.py      # é…ç½®æœåŠ¡
â””â”€â”€ tests/
    â”œâ”€â”€ test_integration_app.py # é›†æˆæµ‹è¯•
    â””â”€â”€ test_components.py      # ç»„ä»¶æµ‹è¯•
```

## é¡µé¢å¯¼èˆªè®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¦ PolyOMB Volatility Market Maker                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Skillç®¡ç†] [å‚æ•°é…ç½®] [å›æµ‹è¿è¡Œ] [ç»“æœå›¾è¡¨]              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚                    é¡µé¢å†…å®¹åŒºåŸŸ                           â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Session State è®¾è®¡

```python
# ç»Ÿä¸€çš„çŠ¶æ€ç®¡ç†
st.session_state = {
    # å¯¼èˆªçŠ¶æ€
    "current_page": "skill_manager",  # å½“å‰é¡µé¢
    
    # Skill ç®¡ç†çŠ¶æ€
    "selected_skill": None,           # å½“å‰é€‰ä¸­çš„ Skill
    "skill_filter": {...},            # ç­›é€‰æ¡ä»¶
    
    # å‚æ•°é…ç½®çŠ¶æ€
    "strategy_params": {...},         # ç­–ç•¥å‚æ•°
    "param_dirty": False,             # å‚æ•°æ˜¯å¦æœ‰æœªä¿å­˜ä¿®æ”¹
    
    # å›æµ‹è¿è¡ŒçŠ¶æ€
    "selected_question": None,        # é€‰ä¸­çš„é—®é¢˜
    "filter_state": {...},            # ç­›é€‰å™¨çŠ¶æ€
    "backtest_running": False,        # æ˜¯å¦æ­£åœ¨è¿è¡Œå›æµ‹
    "backtest_results": {...},        # å›æµ‹ç»“æœ
    
    # ç»“æœå±•ç¤ºçŠ¶æ€
    "chart_config": {...},            # å›¾è¡¨é…ç½®
}
```

## ç»„ä»¶å¤ç”¨è®¾è®¡

### Common Components
- `render_header()`: ç»Ÿä¸€é¡µé¢å¤´éƒ¨
- `render_navbar()`: å¯¼èˆªæ 
- `render_footer()`: é¡µè„š
- `render_error()`: é”™è¯¯æç¤º
- `render_loading()`: åŠ è½½çŠ¶æ€

### State Manager
- `init_state()`: åˆå§‹åŒ–æ‰€æœ‰çŠ¶æ€
- `get_state(key)`: è·å–çŠ¶æ€
- `set_state(key, value)`: è®¾ç½®çŠ¶æ€
- `clear_state()`: æ¸…é™¤çŠ¶æ€

## æ•°æ®æµè®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç”¨æˆ·æ“ä½œ                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Session State ç®¡ç†                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Skill State  â”‚ Param State  â”‚ Backtest St  â”‚ Result St   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Service Layer                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Skill Svc    â”‚ Config Svc   â”‚ Backtest Svc â”‚ Chart Svc   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      UI Components                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Skill Page   â”‚ Param Page   â”‚ Backtest Pg  â”‚ Result Page â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æµ‹è¯•ç­–ç•¥

1. **å•å…ƒæµ‹è¯•**: æµ‹è¯•å„ä¸ªç»„ä»¶å’ŒæœåŠ¡çš„ç‹¬ç«‹åŠŸèƒ½
2. **é›†æˆæµ‹è¯•**: æµ‹è¯•é¡µé¢é—´çš„çŠ¶æ€ä¼ é€’
3. **E2Eæµ‹è¯•**: æµ‹è¯•å®Œæ•´ç”¨æˆ·æµç¨‹

## å®ç°æ­¥éª¤

1. åˆ›å»º `components/state_manager.py` - ç»Ÿä¸€çŠ¶æ€ç®¡ç†
2. åˆ›å»º `components/common.py` - å…¬å…±ç»„ä»¶
3. åˆ›å»º `pages/` ç›®å½•å’Œé¡µé¢æ–‡ä»¶
4. åˆ›å»º `app.py` - ä¸»å…¥å£
5. ç¼–å†™æµ‹è¯•ä»£ç 
6. è¿è¡Œæµ‹è¯•å¹¶ä¿®å¤é—®é¢˜
