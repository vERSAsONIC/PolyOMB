# A0005 å¤šé¡µé¢åº”ç”¨ä½¿ç”¨è¯´æ˜

## æ¦‚è¿°

æœ¬é¡¹ç›®å·²å°†4ä¸ªç‹¬ç«‹çš„ Streamlit ç•Œé¢æ•´åˆä¸ºä¸€ä¸ªç»Ÿä¸€çš„å¤šé¡µé¢åº”ç”¨ï¼š
- ğŸ“¦ **Skill ç®¡ç†** - ç®¡ç†å’Œé€‰æ‹©ç­–ç•¥ Skills
- âš™ï¸ **å‚æ•°é…ç½®** - é…ç½®æ³¢åŠ¨ç‡åšå¸‚ç­–ç•¥å‚æ•°
- ğŸ”· **å›æµ‹è¿è¡Œ** - è¿è¡Œç­–ç•¥å›æµ‹åˆ†æ
- ğŸ“Š **ç»“æœå›¾è¡¨** - æŸ¥çœ‹å›æµ‹ç»“æœå›¾è¡¨

## æ–‡ä»¶ç»“æ„

```
00002_volatility_market_maker/
â”œâ”€â”€ app.py                      # ä¸»å…¥å£ï¼ˆæ•´åˆç‰ˆï¼‰
â”œâ”€â”€ pages/                      # ç‹¬ç«‹é¡µé¢ï¼ˆé‡å®šå‘åˆ°ä¸»åº”ç”¨ï¼‰
â”‚   â”œâ”€â”€ 01_Skill_Manager.py
â”‚   â”œâ”€â”€ 02_Param_Config.py
â”‚   â”œâ”€â”€ 03_Backtest_Runner.py
â”‚   â””â”€â”€ 04_Result_Charts.py
â”œâ”€â”€ components/                 # å…±äº«ç»„ä»¶
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ state_manager.py       # Session State ç»Ÿä¸€ç®¡ç†
â”‚   â””â”€â”€ common.py              # å…¬å…±UIç»„ä»¶
â”œâ”€â”€ ui/                         # åŸå§‹UIæ¨¡å—ï¼ˆä¿ç•™ï¼‰
â”‚   â”œâ”€â”€ skill_manager.py
â”‚   â”œâ”€â”€ param_config.py
â”‚   â”œâ”€â”€ backtest_runner.py
â”‚   â””â”€â”€ result_charts.py
â””â”€â”€ tests/
    â””â”€â”€ test_multipage_app.py  # å¤šé¡µé¢åº”ç”¨æµ‹è¯•
```

## å¿«é€Ÿå¼€å§‹

### å¯åŠ¨åº”ç”¨

```bash
cd PolyOMB_Skills/00002_volatility_market_maker
streamlit run app.py
```

åº”ç”¨å°†åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œé»˜è®¤åœ°å€ï¼š`http://localhost:8501`

### ä½¿ç”¨æµç¨‹

1. **Skill ç®¡ç†é¡µé¢**
   - æµè§ˆå¯ç”¨çš„ Skills
   - æœç´¢å’Œç­›é€‰ Skills
   - é€‰æ‹©ä¸€ä¸ª Skill è¿›è¡Œé…ç½®æˆ–è¿è¡Œ

2. **å‚æ•°é…ç½®é¡µé¢**
   - è°ƒæ•´é£æ§å‚æ•°ï¼ˆæ­¢æŸã€æ­¢ç›ˆã€æ³¢åŠ¨ç‡é˜ˆå€¼ç­‰ï¼‰
   - è®¾ç½®äº¤æ˜“å‚æ•°ï¼ˆæœ€å¤§æŒä»“ã€äº¤æ˜“æ•°é‡ç­‰ï¼‰
   - ä¿å­˜é…ç½®æˆ–è¿è¡Œå›æµ‹

3. **å›æµ‹è¿è¡Œé¡µé¢**
   - ç­›é€‰æ•°æ®æºå’Œ Markets
   - é€‰æ‹©è¦åˆ†æçš„ Question
   - æŸ¥çœ‹å®æ—¶ä»·æ ¼å’Œç­–ç•¥ä¿¡å·å›¾è¡¨
   - æŸ¥çœ‹äº¤æ˜“è®°å½•å’Œç»Ÿè®¡æŒ‡æ ‡

4. **ç»“æœå›¾è¡¨é¡µé¢**
   - æŸ¥çœ‹å®Œæ•´çš„ä»·æ ¼èµ°åŠ¿å’Œäº¤æ˜“æ ‡è®°
   - åˆ†æç›ˆäºæ›²çº¿
   - æŸ¥çœ‹è¯¦ç»†çš„äº¤æ˜“è®°å½•
   - æ£€æŸ¥ç»¼åˆç»Ÿè®¡æŒ‡æ ‡

## çŠ¶æ€ç®¡ç†

åº”ç”¨ä½¿ç”¨ç»Ÿä¸€çš„ Session State ç®¡ç†çŠ¶æ€ï¼š

| çŠ¶æ€é”® | è¯´æ˜ |
|--------|------|
| `current_page` | å½“å‰é¡µé¢ |
| `selected_skill` | é€‰ä¸­çš„ Skill ID |
| `strategy_params` | ç­–ç•¥å‚æ•° |
| `param_dirty` | å‚æ•°æ˜¯å¦æœ‰æœªä¿å­˜ä¿®æ”¹ |
| `selected_question` | é€‰ä¸­çš„ Question |
| `backtest_results` | å›æµ‹ç»“æœ |
| `backtest_running` | æ˜¯å¦æ­£åœ¨è¿è¡Œå›æµ‹ |

### çŠ¶æ€æŒä¹…åŒ–

- æ‰€æœ‰çŠ¶æ€åœ¨é¡µé¢åˆ‡æ¢æ—¶è‡ªåŠ¨ä¿æŒ
- ä½¿ç”¨ä¾§è¾¹æ çš„ã€Œé‡ç½®æ‰€æœ‰çŠ¶æ€ã€æŒ‰é’®å¯ä»¥æ¸…é™¤çŠ¶æ€
- å¯ç”¨ã€Œè°ƒè¯•æ¨¡å¼ã€å¯ä»¥æŸ¥çœ‹å½“å‰çŠ¶æ€

## ä»£ç å®¡æŸ¥æ”¹è¿›

### å·²ä¿®å¤çš„é—®é¢˜

| é—®é¢˜ | ä¿®å¤æ–¹æ³• |
|------|---------|
| Session State ç®¡ç†æ··ä¹± | åˆ›å»ºç»Ÿä¸€çš„ `state_manager.py` |
| é‡å¤ä»£ç  | æå–å…¬å…±ç»„ä»¶åˆ° `common.py` |
| é¡µé¢é—´çŠ¶æ€ä¼ é€’å›°éš¾ | ä½¿ç”¨ç»Ÿä¸€çš„ Session State |
| ç¼ºå°‘é”™è¯¯å¤„ç† | æ·»åŠ å¼‚å¸¸å¤„ç†å’Œç”¨æˆ·æç¤º |
| æ— æµ‹è¯•è¦†ç›– | æ·»åŠ  `test_multipage_app.py` |

### æ¶æ„ä¼˜åŒ–

1. **ç»Ÿä¸€çŠ¶æ€ç®¡ç†**
   - æ‰€æœ‰çŠ¶æ€é€šè¿‡ `state_manager.py` ç®¡ç†
   - æä¾› `get_state()`, `set_state()`, `clear_state()` æ¥å£

2. **ç»„ä»¶åŒ–è®¾è®¡**
   - å…¬å…±UIç»„ä»¶æŠ½å–åˆ° `common.py`
   - ç»Ÿä¸€çš„ header, footer, error æ˜¾ç¤º

3. **é¡µé¢å¯¼èˆª**
   - ä¾§è¾¹æ å¯¼èˆª
   - é¡µé¢é—´è‡ªåŠ¨çŠ¶æ€åŒæ­¥
   - é¡µé¢åˆ‡æ¢æ—¶ä¿æŒç”¨æˆ·æ•°æ®

## æµ‹è¯•

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python3 -m pytest tests/test_multipage_app.py -v

# è¿è¡Œç‰¹å®šæµ‹è¯•
python3 -m pytest tests/test_multipage_app.py::TestStateManager -v
```

### æµ‹è¯•ç»“æœ

```
======================== 12 passed, 4 skipped in 0.18s =========================
```

- âœ… 12 ä¸ªæµ‹è¯•é€šè¿‡
- â­ï¸ 4 ä¸ªæµ‹è¯•è·³è¿‡ï¼ˆå›  Streamlit é¡µé¢å‘½åé™åˆ¶ï¼‰

## è°ƒè¯•æ¨¡å¼

åœ¨ä¾§è¾¹æ å¯ç”¨ã€Œè°ƒè¯•æ¨¡å¼ã€å¯ä»¥æŸ¥çœ‹ï¼š
- å½“å‰ Session State çš„å®Œæ•´å†…å®¹
- çŠ¶æ€å˜åŒ–è¿½è¸ª

## æ³¨æ„äº‹é¡¹

1. **ä¸è¦ç›´æ¥è¿è¡Œ pages/ ä¸‹çš„æ–‡ä»¶**
   - è¿™äº›æ–‡ä»¶ä¼šé‡å®šå‘åˆ°ä¸»åº”ç”¨
   - å§‹ç»ˆä½¿ç”¨ `streamlit run app.py`

2. **åŸå§‹ ui/ æ¨¡å—ä¿ç•™**
   - å¦‚éœ€ç‹¬ç«‹è¿è¡ŒæŸä¸ªç•Œé¢ï¼Œä»å¯ä½¿ç”¨åŸå§‹æ–‡ä»¶
   - ä¾‹å¦‚ï¼š`streamlit run ui/skill_manager.py`

3. **çŠ¶æ€å…¼å®¹æ€§**
   - å¤šé¡µé¢åº”ç”¨å’Œç‹¬ç«‹æ¨¡å—ä¸å…±äº« Session State
   - å»ºè®®åœ¨å¤šé¡µé¢åº”ç”¨ä¸­å®Œæˆå®Œæ•´å·¥ä½œæµ

## åç»­ä¼˜åŒ–å»ºè®®

1. **æ•°æ®è¿æ¥**
   - å°†æ¨¡æ‹Ÿæ•°æ®æ›¿æ¢ä¸ºçœŸå®æ•°æ®æº
   - æ·»åŠ æ•°æ®ç¼“å­˜æœºåˆ¶

2. **æ€§èƒ½ä¼˜åŒ–**
   - æ·»åŠ æ•°æ®åˆ†é¡µåŠ è½½
   - ä¼˜åŒ–å›¾è¡¨æ¸²æŸ“æ€§èƒ½

3. **åŠŸèƒ½æ‰©å±•**
   - æ·»åŠ å¯¼å‡ºåŠŸèƒ½ï¼ˆPDFã€CSVï¼‰
   - æ”¯æŒå¤š Skill å¯¹æ¯”
   - æ·»åŠ æ›´å¤šå›¾è¡¨ç±»å‹
